(this["webpackJsonpslack-app"]=this["webpackJsonpslack-app"]||[]).push([[0],{14:function(e,t,s){},30:function(e,t,s){},38:function(e,t,s){},39:function(e,t,s){},59:function(e,t,s){},61:function(e,t,s){},62:function(e,t,s){},63:function(e,t,s){},72:function(e,t,s){},73:function(e,t,s){},74:function(e,t,s){},75:function(e,t,s){},76:function(e,t,s){},77:function(e,t,s){},78:function(e,t,s){},79:function(e,t,s){},80:function(e,t,s){},81:function(e,t,s){"use strict";s.r(t);var n=s(1),a=s.n(n),c=s(31),i=s.n(c),r=(s(38),s(39),s(14),s(2)),o=s(8),l=s.n(o);l.a.defaults.baseURL="https://slackapi.avionschool.com/api/v1/";var d=function(e){return l()({method:"post",url:e.url,data:{email:e.email,password:e.password,password_confirmation:e.password_confirmation}})},j=function(e){return l()({method:"GET",url:e.url,headers:{"access-token":e["access-token"],client:e.client,expiry:e.expiry,uid:e.uid}}).then((function(e){return e})).catch((function(e){return e}))},u=function(e){return l()({method:"GET",url:"messages?receiver_id=".concat(e.user_id,"&receiver_class=").concat(e.receiver_class),params:{receiver_id:e.user_id,receiver_class:e.receiver_class},headers:{"access-token":e["access-token"],client:e.client,expiry:e.expiry,uid:e.uid}}).then((function(e){return e})).catch((function(e){return e}))},h=s(4),b=(s(59),s(0)),m=function(e){var t=e.className,s=e.text,n=e.type,a=e.onClick;return Object(b.jsx)(b.Fragment,{children:Object(b.jsx)("button",{className:t,type:n,onClick:a,children:s})})},O=(s(61),s(62),function(e){var t=e.className;return Object(b.jsx)(b.Fragment,{children:Object(b.jsxs)("h1",{className:t,children:[Object(b.jsx)("span",{children:"t"}),Object(b.jsx)("span",{children:":"}),Object(b.jsx)("span",{children:"l"}),Object(b.jsx)("span",{children:"k"})]})})}),x=function(){return Object(b.jsx)("div",{className:"loading-container",children:Object(b.jsx)(O,{className:"loading-logo"})})},g=(s(63),function(e){var t=e.className,s=e.text;return Object(b.jsx)("div",{className:t,children:s})}),p=s(3),f=Object(n.createContext)(),v=function(e){var t=e.children,s=Object(n.useState)(null),a=Object(r.a)(s,2),c=a[0],i=a[1],o=Object(n.useState)(null),l=Object(r.a)(o,2),d=l[0],j=l[1],u=Object(n.useState)(!1),h=Object(r.a)(u,2),m=h[0],O=h[1],x=Object(n.useState)(""),g=Object(r.a)(x,2),v=g[0],N=g[1],w=Object(n.useState)("dm"),C=Object(r.a)(w,2),k=C[0],S=C[1],y=Object(n.useState)(""),L=Object(r.a)(y,2),M=L[0],I=L[1],U=Object(n.useState)(""),_=Object(r.a)(U,2),D=_[0],T=_[1],H=Object(n.useState)(""),F=Object(r.a)(H,2),E=F[0],A=F[1],P=Object(n.useState)([]),R=Object(r.a)(P,2),z=R[0],B=R[1],W=Object(n.useState)([]),J=Object(r.a)(W,2),q=J[0],G=J[1],V=Object(n.useState)(),K=Object(r.a)(V,2),$=K[0],Q=K[1],X=Object(n.useState)([]),Y=Object(r.a)(X,2),Z=Y[0],ee=Y[1],te=Object(n.useState)(!1),se=Object(r.a)(te,2),ne=se[0],ae=se[1],ce=Object(n.useState)(!1),ie=Object(r.a)(ce,2),re=ie[0],oe=ie[1],le=Object(n.useState)(!1),de=Object(r.a)(le,2),je=de[0],ue=de[1],he=Object(n.useState)(!1),be=Object(r.a)(he,2),me=be[0],Oe=be[1],xe=Object(n.useState)({}),ge=Object(r.a)(xe,2),pe=ge[0],fe=ge[1],ve=Object(n.useState)(),Ne=Object(r.a)(ve,2),we=Ne[0],Ce=Ne[1];return Object(b.jsx)(f.Provider,{value:{currentUser:c,setUser:i,currentHeaders:d,setHeaders:j,isLoggedIn:m,setIsLoggedIn:O,loginMessage:v,setLoginMessage:N,sidebarMode:k,setSidebarMode:S,channelList:M,setChannelList:I,allUsers:D,setAllUsers:T,contactList:E,setContactList:A,allChannelMessages:Z,setAllChannelMessages:ee,loadData:ne,setLoadData:ae,handleSetLoadData:function(){ae(!ne)},logoutFunction:function(){return localStorage.setItem("User",null),sessionStorage.setItem("User",null),sessionStorage.setItem("Headers",null),i(null),j(null),O(!1),N(""),S("dm"),ue(!1),Object(b.jsx)(p.a,{to:"/login"})},localStorageLogin:function(e){localStorage.setItem("User",JSON.stringify(e))},tokenSessionStorage:function(e,t){sessionStorage.setItem("User",JSON.stringify(e)),sessionStorage.setItem("Headers",JSON.stringify(t))},showModal:re,setShowModal:oe,removeEmail:function(e){return e.split("@")[0]},showContent:je,setShowContent:ue,showChatInfo:me,setShowChatInfo:Oe,messages:$,setMessages:Q,handleSetShowChatInfo:function(){Oe((function(e){return!e}))},userIds:q,setUserIds:G,addUsers:z,setAddUsers:B,chatInfo:pe,setChatInfo:fe,chatName:we,setChatName:Ce},children:t})},N=function(){var e=Object(n.useContext)(f),t=e.setUser,s=e.setHeaders,a=e.setIsLoggedIn,c=e.loginMessage,i=e.localStorageLogin,o=e.setLoginMessage,l=e.tokenSessionStorage,j=Object(n.useRef)(null),u=Object(n.useRef)(null),x=Object(n.useState)(null),p=Object(r.a)(x,2),v=p[0],N=p[1],w=Object(n.useState)(),C=Object(r.a)(w,2),k=C[0],S=C[1],y=Object(n.useState)(!1),L=Object(r.a)(y,2),M=L[0],I=L[1];return Object(n.useEffect)((function(){var e=JSON.parse(localStorage.getItem("User")),n=JSON.parse(sessionStorage.getItem("User")),c=JSON.parse(sessionStorage.getItem("Headers"));n?(a(!0),s(c),t(n)):e&&(o("Logging you in..."),d(e).then((function(e){s(e.headers),t(e.data.data),o("Logged in!"),a(!0),l(e.data.data,e.headers)})).catch((function(e){e.response?(console.log(e.response.data),console.log(e.response.status),console.log(e.response.headers),s(""),t(""),o(e.response.data.errors[0]),setTimeout((function(){o("")}),3e3),setTimeout((function(){o("")}),3e3)):e.request?(console.log(e.request),o("Server error, please try again."),setTimeout((function(){o("")}),3e3)):console.log("Error",e.message)})))}),[]),Object(b.jsxs)("div",{className:"login-page",children:[M||k||c?Object(b.jsx)(g,{className:"toast-message",text:k||c}):Object(b.jsx)(b.Fragment,{}),Object(b.jsx)(O,{className:"hero-logo"}),Object(b.jsx)("h2",{className:"login-title",children:"Let's go!"}),Object(b.jsx)("p",{className:"login-subtitle",children:"Log in to your account and start connecting. Check check check."}),Object(b.jsxs)("form",{className:"login-container",onSubmit:function(e){e.preventDefault(),console.log(j.current.value),console.log(u.current.value),function(){if(""!==j.current.value&&""!==u.current.value){var e={url:"auth/sign_in",email:j.current.value,password:u.current.value};S("Logging you in..."),d(e).then((function(n){s(n.headers),t(n.data.data),S("Logged in!"),a(!0),console.log(n),v&&(i(e),l(n.data.data,n.headers))})).catch((function(e){e.response?(s(""),t(""),S(null===e||void 0===e?void 0:e.response.data.errors[0]),setTimeout((function(){S(!1)}),3e3)):e.request?(console.log(e.request),S("Server error, please try again."),setTimeout((function(){S(!1)}),3e3)):console.log("Error",e.message)}))}else S("Please fill out the required fields"),I(!0)}()},children:[Object(b.jsxs)("label",{className:"input-container",children:[Object(b.jsx)("span",{children:"Email"}),Object(b.jsx)("input",{type:"email",name:"login-email",id:"login-email",ref:j})]}),Object(b.jsxs)("label",{className:"input-container",children:[Object(b.jsx)("span",{children:"Password"}),Object(b.jsx)("input",{type:"password",name:"login-password",id:"login-password",ref:u})]}),Object(b.jsxs)("label",{className:"checkbox-container",children:[Object(b.jsx)("input",{type:"checkbox",name:"remember-user",id:"remember-user",onClick:function(e){!function(e){var t=e.target.checked;N(!!t)}(e)}}),Object(b.jsx)("span",{children:"Keep me logged in"})]}),Object(b.jsx)(m,{type:"submit",text:"Login",className:"button"})]}),Object(b.jsxs)("div",{children:["Don't have an account yet?"," ",Object(b.jsx)(h.b,{className:"hyperlink",to:"/signup",children:"Sign up here."})]})]})},w=function(){var e=Object(n.useRef)(null),t=Object(n.useRef)(null),s=Object(n.useRef)(null),a=Object(n.useState)(),c=Object(r.a)(a,2),i=c[0],o=c[1],l=Object(n.useState)(!1),j=Object(r.a)(l,2),u=j[0],O=j[1],x=Object(n.useState)(!1),p=Object(r.a)(x,2),f=p[0],v=p[1],N=function(){t.current.value!==s.current.value&&(o("Password did not match"),v(!0),t.current.focus(),setTimeout((function(){v(!1)}),3e3)),t.current.value.length<6&&(o("Password is too short"),v(!0),setTimeout((function(){v(!1)}),3e3)),/^\w+([\.-]?\w+)*@\w+([\.-]?\w+)*(\.\w{2,3})+$/.test(e.current.value)||(o("Please enter valid email"),v(!0),e.current.focus(),setTimeout((function(){v(!1)}),3e3))};return Object(b.jsxs)("div",{className:"login-page",children:[Object(b.jsx)("h2",{className:"login-title",children:"Let's get started!"}),Object(b.jsx)("p",{className:"login-subtitle",children:"Sign up for an account to connect with other people"}),Object(b.jsxs)("form",{className:"login-container",onSubmit:function(n){n.preventDefault(),function(){N();var n={url:"auth",email:e.current.value,password:t.current.value,password_confirmation:s.current.value};d(n).then((function(e){o("Registration Success"),O(!0),console.log("res",e)})).catch((function(e){o("Something went wrong. Please try again"),O(!0),console.log("err",e)}))}()},children:[Object(b.jsx)("br",{}),Object(b.jsxs)("label",{className:"input-container",children:[Object(b.jsx)("span",{children:"Email"}),Object(b.jsx)("input",{type:"email",name:"register-email",id:"register-email",ref:e})]}),Object(b.jsxs)("label",{className:"input-container",children:[Object(b.jsx)("span",{children:"Password"}),Object(b.jsx)("input",{type:"password",name:"register-name",min:"6",id:"register-password",ref:t})]}),Object(b.jsxs)("label",{className:"input-container",children:[Object(b.jsx)("span",{children:"Confirm Password"}),Object(b.jsx)("input",{type:"password",name:"register-name",min:"6",id:"register-passconfirm",ref:s})]}),Object(b.jsx)(m,{text:"Register",type:"submit",className:"button"})]}),Object(b.jsxs)("div",{children:["Already have an account? ",Object(b.jsx)(h.b,{to:"/login",children:"Log in."})]}),u||f?Object(b.jsx)(g,{className:"toast-message",text:i}):Object(b.jsx)(b.Fragment,{})]})},C=function(){return Object(b.jsx)("div",{className:"login-hero"})},k=s(9),S=(s(72),function(e){var t,s=e.id,n=e.name,a=e.isChannel,c=e.isChip,i=["#d43d2a","#ed8937","#d5b758","#9cb27a","#62ae9d","#2aa9be"];return 0===s?t=0:s>=i.length?t=Math.floor(s%i.length):s<i.length&&(t=Math.floor(i.length%s)),Object(b.jsxs)("div",{className:"pic-container",children:[Object(b.jsx)("div",{className:c?"chip-pic":"profile-pic",style:{backgroundColor:i[t]},children:n.charAt(0).toUpperCase()}),a?Object(b.jsx)("div",{className:"channel-pic-icon",children:Object(b.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:Object(b.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1,d:"M17 20h5v-2a3 3 0 00-5.356-1.857M17 20H7m10 0v-2c0-.656-.126-1.283-.356-1.857M7 20H2v-2a3 3 0 015.356-1.857M7 20v-2c0-.656.126-1.283.356-1.857m0 0a5.002 5.002 0 019.288 0M15 7a3 3 0 11-6 0 3 3 0 016 0zm6 3a2 2 0 11-4 0 2 2 0 014 0zM7 10a2 2 0 11-4 0 2 2 0 014 0z"})})}):""]})}),y=(s(73),s.p+"static/media/startchannel.d76733b3.svg"),L=function(){var e=Object(n.useContext)(f),t=e.channelList,s=e.handleSetLoadData,a=e.currentHeaders,c=e.loadData,i=e.removeEmail,r=e.allChannelMessages,o=e.setAllChannelMessages,l=e.setShowContent,d=(e.setMessages,function(e){for(var t=0;t<r.length;t++)if(e.id===r[t].id)return Object(b.jsxs)("div",{className:"recent-message-container",children:[r[t].sender?Object(b.jsxs)("span",{className:"recent-message-sender",children:[i(r[t].sender),":"]}):"",Object(b.jsx)("span",{className:"recent-message",children:r[t].message})]})});return Object(n.useEffect)((function(){!function(){if(t)for(var e=function(e){var s={"access-token":a["access-token"],client:a.client,expiry:a.expiry,uid:a.uid,user_id:parseInt(t.data.data[e].id),receiver_class:"Channel"};u(s).then((function(s){var n;(null===(n=s.data)||void 0===n?void 0:n.data.length)>0?(console.log("res",s),console.log(s.data.data.at(-1).body),o((function(n){return[].concat(Object(k.a)(n),[{id:parseInt(t.data.data[e].id),message:s.data.data.at(-1).body,sender:s.data.data.at(-1).sender.email}])}))):(console.log("res",s),o((function(s){return[].concat(Object(k.a)(s),[{id:parseInt(t.data.data[e].id),message:"No messages",sender:null}])})))}))},s=0;s<(null===(n=t.data)||void 0===n?void 0:n.data.length);s++){var n;e(s)}}()}),[c,a]),t.data.errors?Object(b.jsxs)("div",{className:"contact-container-empty",children:[Object(b.jsx)("img",{src:y}),Object(b.jsx)("span",{className:"empty-title",children:"The more the merrier!"}),Object(b.jsx)("p",{children:"Create a new channel."})]}):Object(b.jsx)("div",{className:"channel-container",children:t.data.data.map((function(e,t){return Object(b.jsxs)(h.b,{to:"/channel/".concat(e.id),className:"channel-item",activeClassName:"selected-message",onClick:function(){s(),l(!0)},children:[Object(b.jsx)(S,{id:e.id,name:e.name,isChannel:!0}),Object(b.jsxs)("div",{className:"inbox-info",children:[Object(b.jsx)("span",{className:"inbox-name",children:e.name}),d(e)]})]},t)}))})},M=(s(74),function(){var e=Object(n.useContext)(f),t=e.setSidebarMode,s=e.sidebarMode,a=e.currentUser;return Object(b.jsxs)("nav",{children:[Object(b.jsx)(O,{className:"navbar-logo"}),Object(b.jsxs)("div",{className:"navlink-container",children:[Object(b.jsx)("button",{className:"dm"===s?"nav-link nav-link-active":"nav-link",onClick:function(){return t("dm")},children:Object(b.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:Object(b.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1,d:"M17 8h2a2 2 0 012 2v6a2 2 0 01-2 2h-2v4l-4-4H9a1.994 1.994 0 01-1.414-.586m0 0L11 14h4a2 2 0 002-2V6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2v4l.586-.586z"})})}),Object(b.jsx)("button",{className:"channel"===s?"nav-link nav-link-active":"nav-link",onClick:function(){return t("channel")},children:Object(b.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:Object(b.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1,d:"M17 20h5v-2a3 3 0 00-5.356-1.857M17 20H7m10 0v-2c0-.656-.126-1.283-.356-1.857M7 20H2v-2a3 3 0 015.356-1.857M7 20v-2c0-.656.126-1.283.356-1.857m0 0a5.002 5.002 0 019.288 0M15 7a3 3 0 11-6 0 3 3 0 016 0zm6 3a2 2 0 11-4 0 2 2 0 014 0zM7 10a2 2 0 11-4 0 2 2 0 014 0z"})})}),Object(b.jsx)("button",{className:"search"===s?"nav-link nav-link-active":"nav-link",onClick:function(){return t("search")},children:Object(b.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:Object(b.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1,d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})})})]}),Object(b.jsx)("button",{className:"user"===s?"nav-link nav-link-active":"nav-link",onClick:function(){return t("user")},children:Object(b.jsx)(S,{id:a.id,name:a.email})})]})}),I=(s(75),s(76),s.p+"static/media/beginchat.fee9cb19.svg"),U=function(){var e=Object(n.useContext)(f),t=e.contactList,s=e.handleSetLoadData,a=(e.removeEmail,e.setShowContent);e.setMessages;return 0===t.data.data.length?Object(b.jsxs)("div",{className:"contact-container-empty",children:[Object(b.jsx)("img",{src:I}),Object(b.jsx)("span",{className:"empty-title",children:"Whew, there's nothing here."}),Object(b.jsx)("p",{children:"Start a new conversation!"})]}):Object(b.jsx)("div",{className:"contact-container",children:t.data.data.map((function(e,t){return Object(b.jsxs)(h.b,{to:"/user/".concat(e.id),className:"contact-item",activeClassName:"selected-message",onClick:function(){s(),a(!0)},children:[Object(b.jsx)(S,{id:e.id,name:e.email}),Object(b.jsx)("span",{children:e.email})]},t)}))})},_=(s(77),s(78),function(e){e.type;var t=e.placeholder,s=Object(n.useContext)(f),a=(s.currentHeaders,s.allUsers),c=(s.currentUser,s.addUsers),i=s.setAddUsers,o=s.userIds,l=s.setUserIds,d=Object(n.useState)([]),j=Object(r.a)(d,2),u=j[0],h=j[1],m=Object(n.useState)(""),O=Object(r.a)(m,2),x=O[0],p=O[1],v=Object(n.useState)(""),N=Object(r.a)(v,2),w=N[0],C=N[1],y=Object(n.useState)(!1),L=Object(r.a)(y,2),M=L[0],I=L[1];return Object(b.jsxs)(b.Fragment,{children:[M?Object(b.jsx)(g,{className:"toast-message",text:w}):Object(b.jsx)(b.Fragment,{}),Object(b.jsxs)("div",{className:"input-container",children:[Object(b.jsx)("span",{children:"Add users"}),Object(b.jsx)("input",{type:"text",placeholder:t,onChange:function(e){var t,s=e.target.value;p(s);var n=null===(t=a.data)||void 0===t?void 0:t.data.filter((function(e){return e.email.toLowerCase().includes(s.toLowerCase())}));h(""===s?[]:n)},value:x})]}),0!==u.length&&Object(b.jsx)("div",{className:"newchannel-search-results",children:u.slice(0,5).map((function(e,t){return Object(b.jsxs)("div",{className:"newmsg-search-item",onClick:function(){!function(e){c.includes(e)?(I(!0),C("Please add another user"),setTimeout((function(){I(!1)}),1e3)):(i([].concat(Object(k.a)(c),[e])),l([].concat(Object(k.a)(o),[e.id]))),console.log(c),console.log(o)}(e),h([]),p("")},children:[Object(b.jsx)(S,{id:e.id,name:e.email,isChip:!0}),Object(b.jsx)("span",{children:e.uid})]},t)}))})]})}),D=function(){var e=Object(n.useContext)(f),t=e.currentHeaders,s=e.setShowModal,a=e.userIds,c=e.addUsers,i=e.setAddUsers,o=e.setUserIds,d=Object(n.useRef)(),j=Object(n.useState)(),u=Object(r.a)(j,2),h=u[0],O=u[1],x=Object(n.useState)(!1),p=Object(r.a)(x,2),v=p[0],N=p[1],w=Object(n.useState)(!1),C=Object(r.a)(w,2),y=C[0],L=(C[1],function(){(function(e){return l()({method:"POST",url:"channels",data:{name:e.name,user_ids:e.user_ids},headers:{"access-token":e["access-token"],client:e.client,expiry:e.expiry,uid:e.uid}}).then((function(e){return e})).catch((function(e){return e}))})({name:d.current.value,user_ids:a,"access-token":t["access-token"],client:t.client,expiry:t.expiry,uid:t.uid}).then((function(e){e.data.errors?(O(e.data.errors[0]),N(!0),setTimeout((function(){N(!1)}),3e3)):(O("Channel Created"),N(!0),setTimeout((function(){N(!1),s(!1)}),1500),a.splice(0,a.length),c.splice(0,c.length),console.log(e))})).catch((function(e){console.log("error",e)}))}),M=function(e){var t=Object(k.a)(c);t.splice(e.target.dataset.index,1);var s,n=Object(k.a)(a);n.splice(e.target.dataset.index,1),s=n,i(t),o(s),console.log(t),console.log(n)};return Object(b.jsxs)("div",{className:"channel-modal-container",children:[Object(b.jsxs)("form",{className:"channel-modal",children:[Object(b.jsxs)("div",{className:"modal-upperhalf",children:[Object(b.jsxs)("div",{className:"modal-title",children:[Object(b.jsx)("span",{className:"close-button",onClick:function(){return i([]),o([]),void s(!1)},children:"\u2715"}),Object(b.jsx)("h1",{className:"sidebar-title",children:"Create a channel"})]}),Object(b.jsxs)("div",{className:"newchannel-inputs-container",children:[Object(b.jsxs)("label",{className:"input-container",children:[Object(b.jsx)("span",{children:"Channel Name"}),Object(b.jsx)("input",{type:"text",min:"3",max:"15",ref:d})]}),Object(b.jsx)(_,{})]})]}),Object(b.jsx)("span",{className:"newchannel-chips-container-label",children:"Users to be added to the channel"}),Object(b.jsx)("div",{className:"newchannel-chips-container",children:c.map((function(e,t){return Object(b.jsxs)("div",{className:"select-chip-container",children:[Object(b.jsx)(S,{id:e.id,name:e.email,isChip:!0}),Object(b.jsx)("span",{children:e.email}),Object(b.jsx)("div",{className:"delete-chip-button","data-index":t,onClick:function(e){return M(e)},children:"\u2715"})]},t)}))}),Object(b.jsx)(m,{className:"button",type:"submit",text:"Create Channel",onClick:function(e){e.preventDefault(),L()}})]}),v||y?Object(b.jsx)(g,{className:"toast-message",text:h}):Object(b.jsx)(b.Fragment,{})]})},T=(s(30),function(e){var t=e.placeholder,s=e.type,a=Object(n.useContext)(f),c=a.channelList,i=a.allUsers,o=a.handleSetLoadData,l=a.setShowContent,d=Object(n.useState)([]),j=Object(r.a)(d,2),u=j[0],m=j[1];return Object(b.jsxs)("div",{className:"search-container",children:[Object(b.jsx)("div",{className:"search-input-container",children:Object(b.jsx)("input",{type:"text",placeholder:t,onChange:function(e){var t=e.target.value;if("channel"===s){var n=c.data.data.filter((function(e){return e.name.toLowerCase().includes(t.toLowerCase())}));m(""===t?[]:n)}else if("user"===s){var a=i.data.data.filter((function(e){return e.email.toLowerCase().includes(t.toLowerCase())}));m(""===t?[]:a)}}})}),0!=u.length&&Object(b.jsx)("div",{className:"search-results",children:"channel"===s?Object(b.jsx)(b.Fragment,{children:u.map((function(e,t){return Object(b.jsxs)(h.b,{className:"search-item",to:"/channel/".concat(e.id),onClick:function(){o(),l(!0)},children:[Object(b.jsx)(S,{id:e.id,name:e.name,isChannel:!0}),Object(b.jsxs)("span",{children:[" ",e.name]})]},t)}))}):Object(b.jsx)(b.Fragment,{children:u.slice(0,15).map((function(e,t){return Object(b.jsxs)(h.b,{className:"search-item",to:"/user/".concat(e.id),onClick:function(){o(),l(!0)},children:[Object(b.jsx)(S,{id:e.id,name:e.email,isChannel:!1}),Object(b.jsxs)("span",{children:[" ",e.email," "]})]},t)}))})})]})}),H=function(){var e=Object(n.useContext)(f),t=e.sidebarMode,s=e.logoutFunction,a=e.currentUser,c=e.setShowModal,i=(e.channelList,e.allUsers,e.currentHeaders,e.setShowContent);return"dm"===t?Object(b.jsxs)("div",{className:"sidebar",children:[Object(b.jsx)("h1",{className:"sidebar-title",children:"Direct messages"}),Object(b.jsx)(h.b,{to:"/new-message",className:"button",onClick:function(){return i(!0)},children:"New message"}),Object(b.jsx)(U,{})]}):"channel"===t?Object(b.jsxs)("div",{className:"sidebar",children:[Object(b.jsx)("h1",{className:"sidebar-title",children:"Channels"}),Object(b.jsx)(m,{className:"button",text:"Add channel",onClick:function(){return c(!0)}}),Object(b.jsx)(L,{})]}):"search"===t?Object(b.jsxs)("div",{className:"sidebar",children:[Object(b.jsx)("h1",{className:"sidebar-title",children:"Search"}),Object(b.jsx)(T,{placeholder:"Search for a user",type:"user"})]}):"user"===t?Object(b.jsxs)("div",{className:"sidebar",children:[Object(b.jsx)("h1",{className:"sidebar-title",children:"User"}),Object(b.jsxs)("div",{className:"user-container",children:[Object(b.jsx)(S,{id:a.id,name:a.email}),Object(b.jsx)("span",{className:"user-email",children:a.email})]}),Object(b.jsx)(m,{onClick:s,text:"Logout",className:"button"})]}):void 0},F=s(13),E=(s(79),function(e){var t=e.keyNum,s=e.className,n=e.id,a=e.name,c=e.message,i=e.time,r=e.type,o=new Date(i);o.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit",hour12:!0}),o.toLocaleDateString("en-US");return Object(b.jsxs)("div",{className:s,children:[Object(b.jsxs)("div",{className:"pic-message-container",children:[Object(b.jsx)(S,{id:n,name:a}),Object(b.jsx)("span",{className:"message-bubble-".concat(r),children:c})]}),Object(b.jsx)("span",{className:"message-".concat(r,"-name"),children:a})]},t)}),A=function(e){e.id,e.channelMembers;var t=Object(n.useContext)(f),s=t.showChatInfo,a=(t.setShowChatInfo,t.handleSetShowChatInfo);return Object(b.jsx)("div",{className:"message-sidebar-toggle",onClick:function(){a(),console.log(s)},children:Object(b.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:Object(b.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 5v.01M12 12v.01M12 19v.01M12 6a1 1 0 110-2 1 1 0 010 2zm0 7a1 1 0 110-2 1 1 0 010 2zm0 7a1 1 0 110-2 1 1 0 010 2z"})})})},P=function(e){var t=e.type,s=e.id,a=(e.messages,e.channelMembers),c=Object(n.useContext)(f),i=c.channelList,o=c.allUsers,l=c.loadData,d=c.setShowContent,j=Object(n.useState)(),u=Object(r.a)(j,2),h=u[0],m=u[1];return Object(n.useEffect)((function(){"channel"===t?i.data.data.map((function(e){e.id===parseInt(s)&&m({id:e.id,name:e.name,isChannel:!0})})):"user"===t&&o.data.data.map((function(e){e.id===parseInt(s)&&m({id:e.id,name:e.email,isChannel:!1})}))}),[l]),Object(b.jsx)(b.Fragment,{children:h?Object(b.jsxs)("div",{className:"chat-header",children:[Object(b.jsx)("button",{className:"back-button",onClick:function(){return d(!1)},children:Object(b.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:Object(b.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 19l-7-7 7-7"})})}),Object(b.jsxs)("div",{className:"header-name",children:[h.isChannel?"":Object(b.jsx)(S,{id:h.id,name:h.name,isChannel:h.isChannel}),Object(b.jsx)("h1",{className:h.isChannel?"chat-name ":"chat-name chat-name-user",children:h.name})]}),Object(b.jsx)(A,{id:h.id,channelMembers:a})]}):""})},R=(s.p,function(e){var t=e.type,s=e.id,a=e.newMsg,c=e.setNewMessageUser,i=Object(n.useContext)(f),r=i.currentHeaders,o=i.handleSetLoadData,d=Object(n.useRef)(null),j=Object(p.g)(),u=function(){if((null!==d.current.value||""!==d.current.value)&&null!==s){var e={url:"messages","access-token":r["access-token"],client:r.client,expiry:r.expiry,uid:r.uid,receiver_id:parseInt(s),receiver_class:t.charAt(0).toUpperCase()+t.slice(1),message:d.current.value};(n=e,l()({method:"POST",url:n.url,data:{receiver_id:n.receiver_id,receiver_class:n.receiver_class,body:n.message},headers:{"access-token":n["access-token"],client:n.client,expiry:n.expiry,uid:n.uid}})).then((function(e){console.log("send message ",e),o(),d.current.value=""})).catch((function(e){return console.log(e)})),null===d.current.value&&""===d.current.value||!a||null===s||(j.push("/user/".concat(s)),c())}var n};return Object(b.jsxs)("form",{className:"message-input-container",onSubmit:function(e){e.preventDefault(),u()},children:[Object(b.jsx)("label",{className:"message-input",children:Object(b.jsx)("input",{type:"text",name:"message-input",id:"message-input",placeholder:"Type your message here...",ref:d})}),Object(b.jsx)("button",{type:"submit",className:"send-button",children:Object(b.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:Object(b.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1,d:"M12 19l9 2-9-18-9 18 9-2zm0 0v-8"})})})]})}),z=function(e){var t=e.setNewMessageUser,s=Object(n.useContext)(f),a=s.allUsers,c=s.handleSetLoadData,i=Object(n.useState)([]),o=Object(r.a)(i,2),l=o[0],d=o[1];return Object(b.jsxs)(b.Fragment,{children:[Object(b.jsxs)("div",{className:"newmsg-search-container",children:[Object(b.jsx)("span",{children:"To: "}),Object(b.jsx)("div",{className:"newmsg-search-input-container",children:Object(b.jsx)("input",{type:"text",placeholder:"someone@example.com",onChange:function(e){var t=e.target.value,s=a.data.data.filter((function(e){return e.email.toLowerCase().includes(t.toLowerCase())}));d(""===t?[]:s)}})})]}),0!=l.length&&Object(b.jsx)("div",{className:"newmsg-search-results",children:l.slice(0,15).map((function(e,s){return Object(b.jsxs)("div",{className:"newmsg-search-item",onClick:function(){c(),t(e)},children:[Object(b.jsx)(S,{id:e.id,name:e.email,isChannel:!1}),Object(b.jsx)("span",{children:e.email})]},s)}))})]})},B=(s(80),function(){var e=Object(n.useContext)(f),t=(e.currentHeaders,e.currentUser,e.channelList,e.allUsers,e.loadData,e.showContent),s=e.setShowContent,a=Object(F.useState)(),c=Object(r.a)(a,2),i=c[0],o=c[1];return Object(b.jsx)("div",{className:t?"main-content":"main-content main-content-closed",children:Object(b.jsxs)("div",{className:"new-messages-section",children:[Object(b.jsxs)("div",{className:"new-messages-header",children:[Object(b.jsxs)("div",{className:"chat-header",children:[Object(b.jsx)("button",{className:"back-button",onClick:function(){return s(!1)},children:Object(b.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:Object(b.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 19l-7-7 7-7"})})}),Object(b.jsx)("h1",{className:"chat-name",children:"New message"})]}),i?Object(b.jsxs)("div",{className:"newmsg-search-container",children:[Object(b.jsx)("span",{children:"To: "}),Object(b.jsxs)("div",{className:"chip-container",children:[Object(b.jsx)(S,{id:i.id,name:i.email,isChip:!0}),Object(b.jsx)("span",{children:i.email}),Object(b.jsx)("div",{className:"delete-chip-button",onClick:function(){return o()},children:"\u2715"})]})]}):Object(b.jsx)(z,{setNewMessageUser:o})]}),Object(b.jsx)(R,{type:"User",id:i?i.id:null,newMsg:!0,setNewMessageUser:o})]})})}),W=s.p+"static/media/nocontent.ebe2c5bc.svg",J=function(){var e=Object(n.useRef)();return Object(n.useEffect)((function(){e.current.scrollIntoView()})),Object(b.jsx)("div",{ref:e})},q=function(){var e=Object(n.useContext)(f),t=(e.allUsers,e.currentHeaders,e.handleSetShowChatInfo),s=e.showChatInfo,a=(e.chatInfo,e.loadData,e.channelList,e.chatName),c=Object(n.useState)(),i=Object(r.a)(c,2);i[0],i[1];return Object(b.jsx)("div",{className:s?"message-sidebar":"message-sidebar message-sidebar-closed",children:Object(b.jsxs)("div",{className:"modal-title",children:[Object(b.jsx)("span",{className:"close-button",onClick:function(){return t()},children:"\u2715"}),Object(b.jsx)("h1",{children:"Test component"}),a&&Object(b.jsx)(S,{id:a.id,name:(null===a||void 0===a?void 0:a.name)||"none",isChannel:a.isChannel}),Object(b.jsx)(m,{text:"Invite user",className:"button"})]})})},G=function(){var e,t=Object(n.useContext)(f),s=t.currentHeaders,a=t.currentUser,c=t.channelList,i=t.allUsers,o=t.loadData,l=t.showContent,d=t.messages,j=t.setMessages,h=(t.showChatInfo,t.setChatInfo,t.setChatName),m=Object(p.h)(),O=m.type,g=m.id,v=Object(F.useState)(),N=Object(r.a)(v,2),w=N[0];N[1],Object(n.useRef)(),Object(n.useRef)(null),Object(n.useRef)();return Object(F.useEffect)((function(){!function(){var e={"access-token":s["access-token"],client:s.client,expiry:s.expiry,uid:s.uid,user_id:parseInt(g),receiver_class:O.charAt(0).toUpperCase()+O.slice(1)};console.log("message request",e),u(e).then((function(e){console.log("message request response",e),j(e)}))}(),"channel"===O?c.data.data.map((function(e){e.id===parseInt(g)&&h({id:e.id,name:e.name,isChannel:!0})})):"user"===O&&i.data.data.map((function(e){e.id===parseInt(g)&&h({id:e.id,name:e.email,isChannel:!1})}))}),[o]),d?Object(b.jsx)("div",{className:l?"main-content":"main-content main-content-closed",children:Object(b.jsx)("div",{className:"messages-section",children:d?Object(b.jsxs)(b.Fragment,{children:[Object(b.jsx)(P,{type:O,id:g,messages:d,channelMembers:w}),Object(b.jsx)("div",{className:"messages-content",children:(null===(e=d.data)||void 0===e?void 0:e.data.length)>0?Object(b.jsx)("div",{className:"message-flex",children:Object(b.jsxs)("div",{className:"messages-container",children:[d.data.data.map((function(e,t){return e.sender.id!==a.id?Object(b.jsx)(E,{keyNum:t,id:e.sender.id,name:e.sender.email,message:e.body,time:e.created_at,className:"incoming-messages",type:"sender"}):Object(b.jsx)(E,{keyNum:t,id:e.sender.id,name:e.sender.email,message:e.body,time:e.created_at,className:"outgoing-messages",type:"user"})})),Object(b.jsx)(J,{})]})}):Object(b.jsxs)("div",{className:"message-container-empty",children:[Object(b.jsx)("img",{src:W}),Object(b.jsx)("span",{className:"empty-title",children:"Be the first one to say hi!"}),Object(b.jsx)("p",{children:"Send a message!"})]})}),Object(b.jsx)(R,{type:O,id:g})]}):""})}):Object(b.jsx)(x,{})},V=s.p+"static/media/selectmessage.d806d655.svg",K=function(){var e=Object(n.useContext)(f),t=e.currentHeaders,s=e.currentUser,a=e.setChannelList,c=e.setAllUsers,i=e.setContactList,r=e.allUsers,o=e.channelList,l=e.contactList,d=e.showModal,u=e.setShowModal,h=e.loadData,m=e.removeEmail,O=e.showContent,g=e.showChatInfo;return Object(n.useEffect)((function(){!function(){var e={"access-token":t["access-token"],client:t.client,expiry:t.expiry,uid:t.uid,url:"channels"},s={"access-token":t["access-token"],client:t.client,expiry:t.expiry,uid:t.uid,url:"users"},n={"access-token":t["access-token"],client:t.client,expiry:t.expiry,uid:t.uid,url:"users/recent"};j(e).then((function(e){console.log("channels r",e),console.log("channels",o),a(e)})).catch((function(e){return console.log(e)})),j(s).then((function(e){console.log("users r",e),console.log("users",r),c(e)})).catch((function(e){return console.log(e)})),j(n).then((function(e){console.log("contact r",e),console.log("contact",l),i(e)})).catch((function(e){return console.log(e)}))}()}),[h]),o.data&&r&&l?Object(b.jsxs)("div",{className:"app-container",children:[d?Object(b.jsx)(D,{showModal:d,setShowModal:u}):null,Object(b.jsxs)("div",{className:O?"navigation-bars-container navigation-bars-container-closed":"navigation-bars-container ",children:[Object(b.jsx)(M,{}),Object(b.jsx)(H,{})]}),Object(b.jsxs)(p.d,{children:[Object(b.jsx)(p.b,{path:"/",exact:!0,children:Object(b.jsx)("div",{className:O?g?"main-content main-content-closed":"main-content":"main-content main-content-closed",children:Object(b.jsxs)("div",{className:"message-container-empty",children:[Object(b.jsx)("img",{src:V}),Object(b.jsxs)("span",{className:"empty-title",children:["Welcome back,"," ",m(s.email),"!"]}),Object(b.jsx)("p",{children:"Send a message or choose a contact to get started."})]})})}),Object(b.jsx)(p.b,{path:"/:type/:id",children:Object(b.jsx)(G,{})}),Object(b.jsx)(p.b,{exact:!0,path:"/new-message",children:Object(b.jsx)(B,{})})]}),Object(b.jsx)(q,{})]}):Object(b.jsx)(x,{})},$=s(10),Q=s(16),X=["component"],Y=function(e){var t=e.component,s=Object(Q.a)(e,X),a=Object(n.useContext)(f).isLoggedIn;return Object(b.jsx)(p.b,Object($.a)(Object($.a)({},s),{},{render:function(e){return a?Object(b.jsx)(t,Object($.a)({},e)):Object(b.jsx)(p.a,{to:"/login"})}}))},Z=["component","restricted"],ee=function(e){var t=e.component,s=e.restricted,a=Object(Q.a)(e,Z),c=Object(n.useContext)(f).isLoggedIn;return Object(b.jsx)(p.b,Object($.a)(Object($.a)({},a),{},{render:function(e){return c&&s?Object(b.jsx)(p.a,{to:"/",exact:!0}):Object(b.jsx)(t,Object($.a)({},e))}}))};var te=function(){var e=Object(n.useContext)(f);return e.setUser,e.setHeaders,e.setLoginMessage,e.setIsLoggedIn,Object(b.jsx)("div",{className:"App",children:Object(b.jsxs)(p.d,{children:[Object(b.jsx)(Y,{component:K,path:"/",exact:!0}),Object(b.jsxs)("div",{className:"login-main-container",children:[Object(b.jsx)(C,{}),Object(b.jsx)(ee,{component:N,restricted:!0,path:"/login",exact:!0}),Object(b.jsx)(ee,{component:w,restricted:!0,path:"/signup",exact:!0}),Object(b.jsx)(p.b,{render:function(){return Object(b.jsx)(p.a,{to:"/login"})}})]})]})})},se=function(e){e&&e instanceof Function&&s.e(3).then(s.bind(null,82)).then((function(t){var s=t.getCLS,n=t.getFID,a=t.getFCP,c=t.getLCP,i=t.getTTFB;s(e),n(e),a(e),c(e),i(e)}))};i.a.render(Object(b.jsx)(a.a.StrictMode,{children:Object(b.jsx)(h.a,{children:Object(b.jsx)(v,{children:Object(b.jsx)(te,{})})})}),document.getElementById("root")),se()}},[[81,1,2]]]);
//# sourceMappingURL=main.512ff139.chunk.js.map