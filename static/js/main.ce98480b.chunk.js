(this["webpackJsonpslack-app"]=this["webpackJsonpslack-app"]||[]).push([[0],{13:function(e,t,s){},31:function(e,t,s){},39:function(e,t,s){},40:function(e,t,s){},69:function(e,t,s){},70:function(e,t,s){},71:function(e,t,s){},72:function(e,t,s){},73:function(e,t,s){},74:function(e,t,s){},75:function(e,t,s){},76:function(e,t,s){},77:function(e,t,s){},78:function(e,t,s){},79:function(e,t,s){},80:function(e,t,s){},81:function(e,t,s){},82:function(e,t,s){"use strict";s.r(t);var n=s(1),a=s.n(n),c=s(32),i=s.n(c),r=(s(39),s(14)),o=(s(40),s(13),s(3)),l=s(8),d=s.n(l);d.a.defaults.baseURL="https://slackapi.avionschool.com/api/v1/";var j=function(e){return d()({method:"post",url:e.url,data:{email:e.email,password:e.password,password_confirmation:e.password_confirmation}})},u=function(e){return d()({method:"GET",url:e.url,headers:{"access-token":e["access-token"],client:e.client,expiry:e.expiry,uid:e.uid}}).then((function(e){return e})).catch((function(e){return e}))},b=function(e){return d()({method:"GET",url:"messages?receiver_id=".concat(e.user_id,"&receiver_class=").concat(e.receiver_class),params:{receiver_id:e.user_id,receiver_class:e.receiver_class},headers:{"access-token":e["access-token"],client:e.client,expiry:e.expiry,uid:e.uid}}).then((function(e){return e})).catch((function(e){return e}))},h=s(2),m=s(0),O=Object(n.createContext)(),x=function(e){var t=e.children,s=Object(n.useState)(null),a=Object(h.a)(s,2),c=a[0],i=a[1],r=Object(n.useState)(null),l=Object(h.a)(r,2),d=l[0],j=l[1],u=Object(n.useState)(!1),b=Object(h.a)(u,2),x=b[0],g=b[1],p=Object(n.useState)(""),f=Object(h.a)(p,2),v=f[0],N=f[1],w=Object(n.useState)("dm"),C=Object(h.a)(w,2),k=C[0],S=C[1],y=Object(n.useState)(""),L=Object(h.a)(y,2),M=L[0],I=L[1],U=Object(n.useState)(""),_=Object(h.a)(U,2),D=_[0],T=_[1],H=Object(n.useState)(""),F=Object(h.a)(H,2),E=F[0],P=F[1],R=Object(n.useState)([]),A=Object(h.a)(R,2),z=A[0],B=A[1],W=Object(n.useState)([]),J=Object(h.a)(W,2),q=J[0],G=J[1],V=Object(n.useState)(),K=Object(h.a)(V,2),$=K[0],Q=K[1],X=Object(n.useState)([]),Y=Object(h.a)(X,2),Z=Y[0],ee=Y[1],te=Object(n.useState)(!1),se=Object(h.a)(te,2),ne=se[0],ae=se[1],ce=Object(n.useState)(!1),ie=Object(h.a)(ce,2),re=ie[0],oe=ie[1],le=Object(n.useState)(!1),de=Object(h.a)(le,2),je=de[0],ue=de[1],be=Object(n.useState)(!1),he=Object(h.a)(be,2),me=he[0],Oe=he[1],xe=Object(n.useState)({}),ge=Object(h.a)(xe,2),pe=ge[0],fe=ge[1],ve=Object(n.useState)(),Ne=Object(h.a)(ve,2),we=Ne[0],Ce=Ne[1];return Object(m.jsx)(O.Provider,{value:{currentUser:c,setUser:i,currentHeaders:d,setHeaders:j,isLoggedIn:x,setIsLoggedIn:g,loginMessage:v,setLoginMessage:N,sidebarMode:k,setSidebarMode:S,channelList:M,setChannelList:I,allUsers:D,setAllUsers:T,contactList:E,setContactList:P,allChannelMessages:Z,setAllChannelMessages:ee,loadData:ne,setLoadData:ae,handleSetLoadData:function(){ae(!ne)},logoutFunction:function(){return localStorage.setItem("User",null),sessionStorage.setItem("User",null),sessionStorage.setItem("Headers",null),i(null),j(null),g(!1),N(""),S("dm"),ue(!1),Object(m.jsx)(o.a,{to:"/login"})},localStorageLogin:function(e){localStorage.setItem("User",JSON.stringify(e))},tokenSessionStorage:function(e,t){sessionStorage.setItem("User",JSON.stringify(e)),sessionStorage.setItem("Headers",JSON.stringify(t))},showModal:re,setShowModal:oe,removeEmail:function(e){return e.split("@")[0]},showContent:je,setShowContent:ue,showChatInfo:me,setShowChatInfo:Oe,messages:$,setMessages:Q,handleSetShowChatInfo:function(){Oe((function(e){return!e}))},userIds:q,setUserIds:G,addUsers:z,setAddUsers:B,chatInfo:pe,setChatInfo:fe,chatName:we,setChatName:Ce},children:t})},g=(s(69),function(e){var t=e.className;return Object(m.jsx)(m.Fragment,{children:Object(m.jsxs)("h1",{className:t,children:[Object(m.jsx)("span",{children:"t"}),Object(m.jsx)("span",{children:":"}),Object(m.jsx)("span",{children:"l"}),Object(m.jsx)("span",{children:"k"})]})})}),p=(s(70),function(e){var t,s=e.id,n=e.name,a=e.isChannel,c=e.isChip,i=["#d43d2a","#ed8937","#d5b758","#9cb27a","#62ae9d","#2aa9be"];return 0===s?t=0:s>=i.length?t=Math.floor(s%i.length):s<i.length&&(t=Math.floor(i.length%s)),Object(m.jsxs)("div",{className:"pic-container",children:[Object(m.jsx)("div",{className:c?"chip-pic":"profile-pic",style:{backgroundColor:i[t]},children:n.charAt(0).toUpperCase()}),a?Object(m.jsx)("div",{className:"channel-pic-icon",children:Object(m.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:Object(m.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1,d:"M17 20h5v-2a3 3 0 00-5.356-1.857M17 20H7m10 0v-2c0-.656-.126-1.283-.356-1.857M7 20H2v-2a3 3 0 015.356-1.857M7 20v-2c0-.656.126-1.283.356-1.857m0 0a5.002 5.002 0 019.288 0M15 7a3 3 0 11-6 0 3 3 0 016 0zm6 3a2 2 0 11-4 0 2 2 0 014 0zM7 10a2 2 0 11-4 0 2 2 0 014 0z"})})}):""]})}),f=(s(71),function(){var e=Object(n.useContext)(O),t=e.setSidebarMode,s=e.sidebarMode,a=e.currentUser;return Object(m.jsxs)("nav",{children:[Object(m.jsx)(g,{className:"navbar-logo"}),Object(m.jsxs)("div",{className:"navlink-container",children:[Object(m.jsx)("button",{className:"dm"===s?"nav-link nav-link-active":"nav-link",onClick:function(){return t("dm")},children:Object(m.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:Object(m.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1,d:"M17 8h2a2 2 0 012 2v6a2 2 0 01-2 2h-2v4l-4-4H9a1.994 1.994 0 01-1.414-.586m0 0L11 14h4a2 2 0 002-2V6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2v4l.586-.586z"})})}),Object(m.jsx)("button",{className:"channel"===s?"nav-link nav-link-active":"nav-link",onClick:function(){return t("channel")},children:Object(m.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:Object(m.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1,d:"M17 20h5v-2a3 3 0 00-5.356-1.857M17 20H7m10 0v-2c0-.656-.126-1.283-.356-1.857M7 20H2v-2a3 3 0 015.356-1.857M7 20v-2c0-.656.126-1.283.356-1.857m0 0a5.002 5.002 0 019.288 0M15 7a3 3 0 11-6 0 3 3 0 016 0zm6 3a2 2 0 11-4 0 2 2 0 014 0zM7 10a2 2 0 11-4 0 2 2 0 014 0z"})})}),Object(m.jsx)("button",{className:"search"===s?"nav-link nav-link-active":"nav-link",onClick:function(){return t("search")},children:Object(m.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:Object(m.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1,d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})})})]}),Object(m.jsx)("button",{className:"user"===s?"nav-link nav-link-active":"nav-link",onClick:function(){return t("user")},children:Object(m.jsx)(p,{id:a.id,name:a.email})})]})}),v=(s(72),s(73),function(e){var t=e.className,s=e.text,n=e.type,a=e.onClick;return Object(m.jsx)(m.Fragment,{children:Object(m.jsx)("button",{className:t,type:n,onClick:a,children:s})})}),N=s(9),w=(s(74),s.p+"static/media/startchannel.d76733b3.svg"),C=s(4),k=function(){var e=Object(n.useContext)(O),t=e.channelList,s=e.handleSetLoadData,a=e.currentHeaders,c=e.loadData,i=e.removeEmail,r=e.allChannelMessages,o=e.setAllChannelMessages,l=e.setShowContent,d=(e.setMessages,function(e){for(var t=0;t<r.length;t++)if(e.id===r[t].id)return Object(m.jsxs)("div",{className:"recent-message-container",children:[r[t].sender?Object(m.jsxs)("span",{className:"recent-message-sender",children:[i(r[t].sender),":"]}):"",Object(m.jsx)("span",{className:"recent-message",children:r[t].message})]})});return Object(n.useEffect)((function(){!function(){if(t)for(var e=function(e){var s={"access-token":a["access-token"],client:a.client,expiry:a.expiry,uid:a.uid,user_id:parseInt(t.data.data[e].id),receiver_class:"Channel"};b(s).then((function(s){var n;(null===(n=s.data)||void 0===n?void 0:n.data.length)>0?(console.log("res",s),console.log(s.data.data.at(-1).body),o((function(n){return[].concat(Object(N.a)(n),[{id:parseInt(t.data.data[e].id),message:s.data.data.at(-1).body,sender:s.data.data.at(-1).sender.email}])}))):(console.log("res",s),o((function(s){return[].concat(Object(N.a)(s),[{id:parseInt(t.data.data[e].id),message:"No messages",sender:null}])})))}))},s=0;s<(null===(n=t.data)||void 0===n?void 0:n.data.length);s++){var n;e(s)}}()}),[c,a]),t.data.errors?Object(m.jsxs)("div",{className:"contact-container-empty",children:[Object(m.jsx)("img",{src:w}),Object(m.jsx)("span",{className:"empty-title",children:"The more the merrier!"}),Object(m.jsx)("p",{children:"Create a new channel."})]}):Object(m.jsx)("div",{className:"channel-container",children:t.data.data.map((function(e,t){return Object(m.jsxs)(C.b,{to:"/channel/".concat(e.id),className:"channel-item",activeClassName:"selected-message",onClick:function(){s(),l(!0)},children:[Object(m.jsx)(p,{id:e.id,name:e.name,isChannel:!0}),Object(m.jsxs)("div",{className:"inbox-info",children:[Object(m.jsx)("span",{className:"inbox-name",children:e.name}),d(e)]})]},t)}))})},S=(s(75),s.p+"static/media/beginchat.fee9cb19.svg"),y=function(){var e=Object(n.useContext)(O),t=e.contactList,s=e.handleSetLoadData,a=(e.removeEmail,e.setShowContent);e.setMessages;return 0===t.data.data.length?Object(m.jsxs)("div",{className:"contact-container-empty",children:[Object(m.jsx)("img",{src:S}),Object(m.jsx)("span",{className:"empty-title",children:"Whew, there's nothing here."}),Object(m.jsx)("p",{children:"Start a new conversation!"})]}):Object(m.jsx)("div",{className:"contact-container",children:t.data.data.map((function(e,t){return Object(m.jsxs)(C.b,{to:"/user/".concat(e.id),className:"contact-item",activeClassName:"selected-message",onClick:function(){s(),a(!0)},children:[Object(m.jsx)(p,{id:e.id,name:e.email}),Object(m.jsx)("span",{children:e.email})]},t)}))})},L=(s(31),function(e){var t=e.placeholder,s=e.type,a=Object(n.useContext)(O),c=a.channelList,i=a.allUsers,r=a.handleSetLoadData,o=a.setShowContent,l=Object(n.useState)([]),d=Object(h.a)(l,2),j=d[0],u=d[1];return Object(m.jsxs)("div",{className:"search-container",children:[Object(m.jsx)("div",{className:"search-input-container",children:Object(m.jsx)("input",{type:"text",placeholder:t,onChange:function(e){var t=e.target.value;if("channel"===s){var n=c.data.data.filter((function(e){return e.name.toLowerCase().includes(t.toLowerCase())}));u(""===t?[]:n)}else if("user"===s){var a=i.data.data.filter((function(e){return e.email.toLowerCase().includes(t.toLowerCase())}));u(""===t?[]:a)}}})}),0!=j.length&&Object(m.jsx)("div",{className:"search-results",children:"channel"===s?Object(m.jsx)(m.Fragment,{children:j.map((function(e,t){return Object(m.jsxs)(C.b,{className:"search-item",to:"/channel/".concat(e.id),onClick:function(){r(),o(!0)},children:[Object(m.jsx)(p,{id:e.id,name:e.name,isChannel:!0}),Object(m.jsxs)("span",{children:[" ",e.name]})]},t)}))}):Object(m.jsx)(m.Fragment,{children:j.slice(0,15).map((function(e,t){return Object(m.jsxs)(C.b,{className:"search-item",to:"/user/".concat(e.id),onClick:function(){r(),o(!0)},children:[Object(m.jsx)(p,{id:e.id,name:e.email,isChannel:!1}),Object(m.jsxs)("span",{children:[" ",e.email," "]})]},t)}))})})]})}),M=function(){var e=Object(n.useContext)(O),t=e.sidebarMode,s=e.logoutFunction,a=e.currentUser,c=e.setShowModal,i=e.setShowContent;return"dm"===t?Object(m.jsxs)("div",{className:"sidebar",children:[Object(m.jsx)("h1",{className:"sidebar-title",children:"Direct messages"}),Object(m.jsx)(C.b,{to:"/new-message",className:"button",onClick:function(){return i(!0)},children:"New message"}),Object(m.jsx)(y,{})]}):"channel"===t?Object(m.jsxs)("div",{className:"sidebar",children:[Object(m.jsx)("h1",{className:"sidebar-title",children:"Channels"}),Object(m.jsx)(v,{className:"button",text:"Add channel",onClick:function(){return c(!0)}}),Object(m.jsx)(k,{})]}):"search"===t?Object(m.jsxs)("div",{className:"sidebar",children:[Object(m.jsx)("h1",{className:"sidebar-title",children:"Search"}),Object(m.jsx)(L,{placeholder:"Search for a user",type:"user"})]}):"user"===t?Object(m.jsxs)("div",{className:"sidebar",children:[Object(m.jsx)("h1",{className:"sidebar-title",children:"User"}),Object(m.jsxs)("div",{className:"user-container",children:[Object(m.jsx)(p,{id:a.id,name:a.email}),Object(m.jsx)("span",{className:"user-email",children:a.email})]}),Object(m.jsx)(v,{onClick:s,text:"Logout",className:"button"})]}):void 0},I=(s(76),function(){return Object(m.jsx)("div",{className:"loading-container",children:Object(m.jsx)(g,{className:"loading-logo"})})}),U=s(20),_=(s(77),function(e){var t=e.keyNum,s=e.className,n=e.id,a=e.name,c=e.message,i=e.time,r=e.type,o=new Date(i);o.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit",hour12:!0}),o.toLocaleDateString("en-US");return Object(m.jsxs)("div",{className:s,children:[Object(m.jsxs)("div",{className:"pic-message-container",children:[Object(m.jsx)(p,{id:n,name:a}),Object(m.jsx)("span",{className:"message-bubble-".concat(r),children:c})]}),Object(m.jsx)("span",{className:"message-".concat(r,"-name"),children:a})]},t)}),D=function(e){e.id,e.channelMembers;var t=Object(n.useContext)(O),s=t.showChatInfo,a=(t.setShowChatInfo,t.handleSetShowChatInfo);return Object(m.jsx)("div",{className:"message-sidebar-toggle",onClick:function(){a(),console.log(s)},children:Object(m.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:Object(m.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 5v.01M12 12v.01M12 19v.01M12 6a1 1 0 110-2 1 1 0 010 2zm0 7a1 1 0 110-2 1 1 0 010 2zm0 7a1 1 0 110-2 1 1 0 010 2z"})})})},T=function(e){var t=e.type,s=e.id,a=(e.messages,e.channelMembers),c=Object(n.useContext)(O),i=c.channelList,r=c.allUsers,o=c.loadData,l=c.setShowContent,d=Object(n.useState)(),j=Object(h.a)(d,2),u=j[0],b=j[1];return Object(n.useEffect)((function(){"channel"===t?i.data.data.map((function(e){e.id===parseInt(s)&&b({id:e.id,name:e.name,isChannel:!0})})):"user"===t&&r.data.data.map((function(e){e.id===parseInt(s)&&b({id:e.id,name:e.email,isChannel:!1})}))}),[o]),Object(m.jsx)(m.Fragment,{children:u?Object(m.jsxs)("div",{className:"chat-header",children:[Object(m.jsx)("button",{className:"back-button",onClick:function(){return l(!1)},children:Object(m.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:Object(m.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 19l-7-7 7-7"})})}),Object(m.jsxs)("div",{className:"header-name",children:[u.isChannel?"":Object(m.jsx)(p,{id:u.id,name:u.name,isChannel:u.isChannel}),Object(m.jsx)("h1",{className:u.isChannel?"chat-name ":"chat-name chat-name-user",children:u.name})]}),Object(m.jsx)(D,{id:u.id,channelMembers:a})]}):""})},H=(s.p,function(e){var t=e.type,s=e.id,a=e.newMsg,c=e.setNewMessageUser,i=Object(n.useContext)(O),r=i.currentHeaders,l=i.handleSetLoadData,j=Object(n.useRef)(null),u=Object(o.g)(),b=function(){if((null!==j.current.value||""!==j.current.value)&&null!==s){var e={url:"messages","access-token":r["access-token"],client:r.client,expiry:r.expiry,uid:r.uid,receiver_id:parseInt(s),receiver_class:t.charAt(0).toUpperCase()+t.slice(1),message:j.current.value};(n=e,d()({method:"POST",url:n.url,data:{receiver_id:n.receiver_id,receiver_class:n.receiver_class,body:n.message},headers:{"access-token":n["access-token"],client:n.client,expiry:n.expiry,uid:n.uid}})).then((function(e){console.log("send message ",e),l(),j.current.value=""})).catch((function(e){return console.log(e)})),null===j.current.value&&""===j.current.value||!a||null===s||(u.push("/user/".concat(s)),c())}var n};return Object(m.jsxs)("form",{className:"message-input-container",onSubmit:function(e){e.preventDefault(),b()},children:[Object(m.jsx)("label",{className:"message-input",children:Object(m.jsx)("input",{type:"text",name:"message-input",id:"message-input",placeholder:"Type your message here...",ref:j})}),Object(m.jsx)("button",{type:"submit",className:"send-button",children:Object(m.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:Object(m.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1,d:"M12 19l9 2-9-18-9 18 9-2zm0 0v-8"})})})]})}),F=function(e){var t=e.setNewMessageUser,s=Object(n.useContext)(O),a=s.allUsers,c=s.handleSetLoadData,i=Object(n.useState)([]),r=Object(h.a)(i,2),o=r[0],l=r[1];return Object(m.jsxs)(m.Fragment,{children:[Object(m.jsxs)("div",{className:"newmsg-search-container",children:[Object(m.jsx)("span",{children:"To: "}),Object(m.jsx)("div",{className:"newmsg-search-input-container",children:Object(m.jsx)("input",{type:"text",placeholder:"someone@example.com",onChange:function(e){var t=e.target.value,s=a.data.data.filter((function(e){return e.email.toLowerCase().includes(t.toLowerCase())}));l(""===t?[]:s)}})})]}),0!=o.length&&Object(m.jsx)("div",{className:"newmsg-search-results",children:o.slice(0,15).map((function(e,s){return Object(m.jsxs)("div",{className:"newmsg-search-item",onClick:function(){c(),t(e)},children:[Object(m.jsx)(p,{id:e.id,name:e.email,isChannel:!1}),Object(m.jsx)("span",{children:e.email})]},s)}))})]})},E=(s(78),function(){var e=Object(n.useContext)(O),t=(e.currentHeaders,e.currentUser,e.channelList,e.allUsers,e.loadData,e.showContent),s=e.setShowContent,a=Object(U.useState)(null),c=Object(h.a)(a,2),i=c[0],r=c[1];return Object(m.jsx)("div",{className:t?"main-content":"main-content main-content-closed",children:Object(m.jsxs)("div",{className:"new-messages-section",children:[Object(m.jsxs)("div",{className:"new-messages-header",children:[Object(m.jsxs)("div",{className:"chat-header",children:[Object(m.jsx)("button",{className:"back-button",onClick:function(){return s(!1)},children:Object(m.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:Object(m.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 19l-7-7 7-7"})})}),Object(m.jsx)("h1",{className:"chat-name",children:"New message"})]}),i?Object(m.jsxs)("div",{className:"newmsg-search-container",children:[Object(m.jsx)("span",{children:"To: "}),Object(m.jsxs)("div",{className:"chip-container",children:[Object(m.jsx)(p,{id:i.id,name:i.email,isChip:!0}),Object(m.jsx)("span",{children:i.email}),Object(m.jsx)("div",{className:"delete-chip-button",onClick:function(){return r()},children:"\u2715"})]})]}):Object(m.jsx)(F,{setNewMessageUser:r})]}),Object(m.jsx)(H,{type:"User",id:i?i.id:null,newMsg:!0,setNewMessageUser:r})]})})}),P=s.p+"static/media/nocontent.ebe2c5bc.svg",R=function(){var e=Object(n.useRef)();return Object(n.useEffect)((function(){e.current.scrollIntoView()})),Object(m.jsx)("div",{ref:e})},A=function(){var e=Object(n.useContext)(O),t=(e.allUsers,e.currentHeaders,e.handleSetShowChatInfo),s=e.showChatInfo,a=(e.chatInfo,e.loadData,e.channelList,e.chatName),c=Object(n.useState)(),i=Object(h.a)(c,2);i[0],i[1];return Object(m.jsx)("div",{className:s?"message-sidebar":"message-sidebar message-sidebar-closed",children:Object(m.jsxs)("div",{className:"modal-title",children:[Object(m.jsx)("span",{className:"close-button",onClick:function(){return t()},children:"\u2715"}),Object(m.jsx)("h1",{children:"Test component"}),a&&Object(m.jsx)(p,{id:a.id,name:(null===a||void 0===a?void 0:a.name)||"none",isChannel:a.isChannel}),Object(m.jsx)(v,{text:"Invite user",className:"button"})]})})},z=function(){var e,t=Object(n.useContext)(O),s=(t.currentHeaders,t.currentUser),a=(t.channelList,t.allUsers,t.loadData,t.showContent),c=t.messages,i=(t.setMessages,t.showChatInfo,t.setChatInfo,t.setChatName,Object(o.h)()),r=i.type,l=i.id;Object(n.useRef)(),Object(n.useRef)(null),Object(n.useRef)();return c?Object(m.jsx)("div",{className:a?"main-content":"main-content main-content-closed",children:Object(m.jsx)("div",{className:"messages-section",children:c?Object(m.jsxs)(m.Fragment,{children:[Object(m.jsx)(T,{type:r,id:l,messages:c}),Object(m.jsx)("div",{className:"messages-content",children:(null===(e=c.data)||void 0===e?void 0:e.data.length)>0?Object(m.jsx)("div",{className:"message-flex",children:Object(m.jsxs)("div",{className:"messages-container",children:[c.data.data.map((function(e,t){return e.sender.id!==s.id?Object(m.jsx)(_,{keyNum:t,id:e.sender.id,name:e.sender.email,message:e.body,time:e.created_at,className:"incoming-messages",type:"sender"}):Object(m.jsx)(_,{keyNum:t,id:e.sender.id,name:e.sender.email,message:e.body,time:e.created_at,className:"outgoing-messages",type:"user"})})),Object(m.jsx)(R,{})]})}):Object(m.jsxs)("div",{className:"message-container-empty",children:[Object(m.jsx)("img",{src:P}),Object(m.jsx)("span",{className:"empty-title",children:"Be the first one to say hi!"}),Object(m.jsx)("p",{children:"Send a message!"})]})}),Object(m.jsx)(H,{type:r,id:l})]}):""})}):Object(m.jsx)(I,{})},B=(s(79),function(e){var t=e.className,s=e.text;return Object(m.jsx)("div",{className:t,children:s})}),W=(s(80),s(81),function(e){e.type;var t=e.placeholder,s=Object(n.useContext)(O),a=(s.currentHeaders,s.allUsers),c=(s.currentUser,s.addUsers),i=s.setAddUsers,r=s.userIds,o=s.setUserIds,l=Object(n.useState)([]),d=Object(h.a)(l,2),j=d[0],u=d[1],b=Object(n.useState)(""),x=Object(h.a)(b,2),g=x[0],f=x[1],v=Object(n.useState)(""),w=Object(h.a)(v,2),C=w[0],k=w[1],S=Object(n.useState)(!1),y=Object(h.a)(S,2),L=y[0],M=y[1];return Object(m.jsxs)(m.Fragment,{children:[L?Object(m.jsx)(B,{className:"toast-message",text:C}):Object(m.jsx)(m.Fragment,{}),Object(m.jsxs)("div",{className:"input-container",children:[Object(m.jsx)("span",{children:"Add users"}),Object(m.jsx)("input",{type:"text",placeholder:t,onChange:function(e){var t,s=e.target.value;f(s);var n=null===(t=a.data)||void 0===t?void 0:t.data.filter((function(e){return e.email.toLowerCase().includes(s.toLowerCase())}));u(""===s?[]:n)},value:g})]}),0!==j.length&&Object(m.jsx)("div",{className:"newchannel-search-results",children:j.slice(0,5).map((function(e,t){return Object(m.jsxs)("div",{className:"newmsg-search-item",onClick:function(){!function(e){c.includes(e)?(M(!0),k("Please add another user"),setTimeout((function(){M(!1)}),1e3)):(i([].concat(Object(N.a)(c),[e])),o([].concat(Object(N.a)(r),[e.id]))),console.log(c),console.log(r)}(e),u([]),f("")},children:[Object(m.jsx)(p,{id:e.id,name:e.email,isChip:!0}),Object(m.jsx)("span",{children:e.uid})]},t)}))})]})}),J=function(){var e=Object(n.useContext)(O),t=e.currentHeaders,s=e.setShowModal,a=e.userIds,c=e.addUsers,i=e.setAddUsers,r=e.setUserIds,o=Object(n.useRef)(),l=Object(n.useState)(),j=Object(h.a)(l,2),u=j[0],b=j[1],x=Object(n.useState)(!1),g=Object(h.a)(x,2),f=g[0],w=g[1],C=Object(n.useState)(!1),k=Object(h.a)(C,2),S=k[0],y=(k[1],function(){(function(e){return d()({method:"POST",url:"channels",data:{name:e.name,user_ids:e.user_ids},headers:{"access-token":e["access-token"],client:e.client,expiry:e.expiry,uid:e.uid}}).then((function(e){return e})).catch((function(e){return e}))})({name:o.current.value,user_ids:a,"access-token":t["access-token"],client:t.client,expiry:t.expiry,uid:t.uid}).then((function(e){e.data.errors?(b(e.data.errors[0]),w(!0),setTimeout((function(){w(!1)}),3e3)):(b("Channel Created"),w(!0),setTimeout((function(){w(!1),s(!1)}),1500),a.splice(0,a.length),c.splice(0,c.length),console.log(e))})).catch((function(e){console.log("error",e)}))}),L=function(e){var t=Object(N.a)(c);t.splice(e.target.dataset.index,1);var s,n=Object(N.a)(a);n.splice(e.target.dataset.index,1),s=n,i(t),r(s),console.log(t),console.log(n)};return Object(m.jsxs)("div",{className:"channel-modal-container",children:[Object(m.jsxs)("form",{className:"channel-modal",children:[Object(m.jsxs)("div",{className:"modal-upperhalf",children:[Object(m.jsxs)("div",{className:"modal-title",children:[Object(m.jsx)("span",{className:"close-button",onClick:function(){return i([]),r([]),void s(!1)},children:"\u2715"}),Object(m.jsx)("h1",{className:"sidebar-title",children:"Create a channel"})]}),Object(m.jsxs)("div",{className:"newchannel-inputs-container",children:[Object(m.jsxs)("label",{className:"input-container",children:[Object(m.jsx)("span",{children:"Channel Name"}),Object(m.jsx)("input",{type:"text",min:"3",max:"15",ref:o})]}),Object(m.jsx)(W,{})]})]}),Object(m.jsx)("span",{className:"newchannel-chips-container-label",children:"Users to be added to the channel"}),Object(m.jsx)("div",{className:"newchannel-chips-container",children:c.map((function(e,t){return Object(m.jsxs)("div",{className:"select-chip-container",children:[Object(m.jsx)(p,{id:e.id,name:e.email,isChip:!0}),Object(m.jsx)("span",{children:e.email}),Object(m.jsx)("div",{className:"delete-chip-button","data-index":t,onClick:function(e){return L(e)},children:"\u2715"})]},t)}))}),Object(m.jsx)(v,{className:"button",type:"submit",text:"Create Channel",onClick:function(e){e.preventDefault(),y()}})]}),f||S?Object(m.jsx)(B,{className:"toast-message",text:u}):Object(m.jsx)(m.Fragment,{})]})},q=s.p+"static/media/selectmessage.d806d655.svg",G=function(){var e=Object(n.useContext)(O),t=e.currentHeaders,s=e.currentUser,a=e.setChannelList,c=e.setAllUsers,i=e.setContactList,r=e.allUsers,l=e.channelList,d=e.contactList,j=e.showModal,b=e.setShowModal,h=e.loadData,x=e.removeEmail,g=e.showContent,p=e.showChatInfo;return Object(n.useEffect)((function(){!function(){var e={"access-token":t["access-token"],client:t.client,expiry:t.expiry,uid:t.uid,url:"channels"},s={"access-token":t["access-token"],client:t.client,expiry:t.expiry,uid:t.uid,url:"users"},n={"access-token":t["access-token"],client:t.client,expiry:t.expiry,uid:t.uid,url:"users/recent"};u(e).then((function(e){console.log("channels r",e),console.log("channels",l),a(e)})).catch((function(e){return console.log(e)})),u(s).then((function(e){console.log("users r",e),console.log("users",r),c(e)})).catch((function(e){return console.log(e)})),u(n).then((function(e){console.log("contact r",e),console.log("contact",d),i(e)})).catch((function(e){return console.log(e)}))}()}),[h]),l.data&&r&&d?Object(m.jsxs)("div",{className:"app-container",children:[j?Object(m.jsx)(J,{showModal:j,setShowModal:b}):null,Object(m.jsxs)("div",{className:g?"navigation-bars-container navigation-bars-container-closed":"navigation-bars-container ",children:[Object(m.jsx)(f,{}),Object(m.jsx)(M,{})]}),Object(m.jsxs)(o.d,{children:[Object(m.jsx)(o.b,{path:"/",exact:!0,children:Object(m.jsx)("div",{className:g?p?"main-content main-content-closed":"main-content":"main-content main-content-closed",children:Object(m.jsxs)("div",{className:"message-container-empty",children:[Object(m.jsx)("img",{src:q,alt:"Welcome back"}),Object(m.jsxs)("span",{className:"empty-title",children:["Welcome back,"," ",x(s.email),"!"]}),Object(m.jsx)("p",{children:"Send a message or choose a contact to get started."})]})})}),Object(m.jsx)(o.b,{path:"/:type/:id",component:z}),Object(m.jsx)(o.b,{exact:!0,path:"/new-message",component:E})]}),Object(m.jsx)(A,{})]}):Object(m.jsx)(I,{})},V=s(10),K=s(16),$=["component"],Q=function(e){var t=e.component,s=Object(K.a)(e,$),a=Object(n.useContext)(O).isLoggedIn;return Object(m.jsx)(o.b,Object(V.a)(Object(V.a)({},s),{},{render:function(e){return a?Object(m.jsx)(t,Object(V.a)({},e)):Object(m.jsx)(o.a,{to:"/login"})}}))},X=["component","restricted"],Y=function(e){var t=e.component,s=e.restricted,a=Object(K.a)(e,X),c=Object(n.useContext)(O).isLoggedIn;return Object(m.jsx)(o.b,Object(V.a)(Object(V.a)({},a),{},{render:function(e){return c&&s?Object(m.jsx)(o.a,{to:"/",exact:!0}):Object(m.jsx)(t,Object(V.a)({},e))}}))},Z=function(){var e=Object(n.useContext)(O),t=e.setUser,s=e.setHeaders,a=e.setIsLoggedIn,c=e.loginMessage,i=e.localStorageLogin,r=e.setLoginMessage,o=e.tokenSessionStorage,l=Object(n.useRef)(null),d=Object(n.useRef)(null),u=Object(n.useState)(null),b=Object(h.a)(u,2),x=b[0],p=b[1],f=Object(n.useState)(),N=Object(h.a)(f,2),w=N[0],k=N[1],S=Object(n.useState)(!1),y=Object(h.a)(S,2),L=y[0],M=y[1];return Object(n.useEffect)((function(){var e=JSON.parse(localStorage.getItem("User")),n=JSON.parse(sessionStorage.getItem("User")),c=JSON.parse(sessionStorage.getItem("Headers"));n?(a(!0),s(c),t(n)):e&&(r("Logging you in..."),j(e).then((function(e){s(e.headers),t(e.data.data),r("Logged in!"),a(!0),o(e.data.data,e.headers)})).catch((function(e){e.response?(console.log(e.response.data),console.log(e.response.status),console.log(e.response.headers),s(""),t(""),r(e.response.data.errors[0]),setTimeout((function(){r("")}),3e3),setTimeout((function(){r("")}),3e3)):e.request?(console.log(e.request),r("Server error, please try again."),setTimeout((function(){r("")}),3e3)):console.log("Error",e.message)})))}),[]),Object(m.jsxs)("div",{className:"login-page",children:[L||w||c?Object(m.jsx)(B,{className:"toast-message",text:w||c}):Object(m.jsx)(m.Fragment,{}),Object(m.jsx)(g,{className:"hero-logo"}),Object(m.jsx)("h2",{className:"login-title",children:"Let's go!"}),Object(m.jsx)("p",{className:"login-subtitle",children:"Log in to your account and start connecting. Check check check."}),Object(m.jsxs)("form",{className:"login-container",onSubmit:function(e){e.preventDefault(),console.log(l.current.value),console.log(d.current.value),function(){if(""!==l.current.value&&""!==d.current.value){var e={url:"auth/sign_in",email:l.current.value,password:d.current.value};k("Logging you in..."),j(e).then((function(n){s(n.headers),t(n.data.data),k("Logged in!"),a(!0),console.log(n),x&&(i(e),o(n.data.data,n.headers))})).catch((function(e){e.response?(s(""),t(""),k(null===e||void 0===e?void 0:e.response.data.errors[0]),setTimeout((function(){k(!1)}),3e3)):e.request?(console.log(e.request),k("Server error, please try again."),setTimeout((function(){k(!1)}),3e3)):console.log("Error",e.message)}))}else k("Please fill out the required fields"),M(!0)}()},children:[Object(m.jsxs)("label",{className:"input-container",children:[Object(m.jsx)("span",{children:"Email"}),Object(m.jsx)("input",{type:"email",name:"login-email",id:"login-email",ref:l})]}),Object(m.jsxs)("label",{className:"input-container",children:[Object(m.jsx)("span",{children:"Password"}),Object(m.jsx)("input",{type:"password",name:"login-password",id:"login-password",ref:d})]}),Object(m.jsxs)("label",{className:"checkbox-container",children:[Object(m.jsx)("input",{type:"checkbox",name:"remember-user",id:"remember-user",onClick:function(e){!function(e){var t=e.target.checked;p(!!t)}(e)}}),Object(m.jsx)("span",{children:"Keep me logged in"})]}),Object(m.jsx)(v,{type:"submit",text:"Login",className:"button"})]}),Object(m.jsxs)("div",{children:["Don't have an account yet?"," ",Object(m.jsx)(C.b,{className:"hyperlink",to:"/signup",children:"Sign up here."})]})]})},ee=function(){return Object(m.jsx)("div",{className:"login-hero"})},te=function(){var e=Object(n.useRef)(null),t=Object(n.useRef)(null),s=Object(n.useRef)(null),a=Object(n.useState)(),c=Object(h.a)(a,2),i=c[0],r=c[1],o=Object(n.useState)(!1),l=Object(h.a)(o,2),d=l[0],u=l[1],b=Object(n.useState)(!1),O=Object(h.a)(b,2),x=O[0],g=O[1];return Object(m.jsxs)("div",{className:"login-page",children:[Object(m.jsx)("h2",{className:"login-title",children:"Let's get started!"}),Object(m.jsx)("p",{className:"login-subtitle",children:"Sign up for an account to connect with other people"}),Object(m.jsxs)("form",{className:"login-container",onSubmit:function(n){n.preventDefault(),function(){if(t.current.value!==s.current.value)r("Password did not match"),g(!0),t.current.focus(),setTimeout((function(){g(!1)}),3e3);else if(t.current.value.length<6)r("Password is too short"),g(!0),setTimeout((function(){g(!1)}),3e3);else if(/^\w+([\.-]?\w+)*@\w+([\.-]?\w+)*(\.\w{2,3})+$/.test(e.current.value)){var n={url:"auth",email:e.current.value,password:t.current.value,password_confirmation:s.current.value};j(n).then((function(e){r("Registration Success"),u(!0),console.log("res",e)})).catch((function(e){r("Something went wrong. Please try again"),u(!0),console.log("err",e)}))}else r("Please enter valid email"),g(!0),e.current.focus(),setTimeout((function(){g(!1)}),3e3)}()},children:[Object(m.jsx)("br",{}),Object(m.jsxs)("label",{className:"input-container",children:[Object(m.jsx)("span",{children:"Email"}),Object(m.jsx)("input",{type:"email",name:"register-email",id:"register-email",ref:e})]}),Object(m.jsxs)("label",{className:"input-container",children:[Object(m.jsx)("span",{children:"Password"}),Object(m.jsx)("input",{type:"password",name:"register-name",min:"6",id:"register-password",ref:t})]}),Object(m.jsxs)("label",{className:"input-container",children:[Object(m.jsx)("span",{children:"Confirm Password"}),Object(m.jsx)("input",{type:"password",name:"register-name",min:"6",id:"register-passconfirm",ref:s})]}),Object(m.jsx)(v,{text:"Register",type:"submit",className:"button"})]}),Object(m.jsxs)("div",{children:["Already have an account?"," ",Object(m.jsx)(C.b,{className:"hyperlink",to:"/login",children:"Log in."})]}),d||x?Object(m.jsx)(B,{className:"toast-message",text:i}):Object(m.jsx)(m.Fragment,{})]})},se=function(){return Object(m.jsxs)("div",{className:"login-main-container",children:[Object(m.jsx)(ee,{}),Object(m.jsxs)(o.d,{children:[Object(m.jsx)(Y,{component:Z,restricted:!0,path:"/login",exact:!0}),Object(m.jsx)(Y,{component:te,restricted:!0,path:"/signup",exact:!0}),Object(m.jsx)(o.b,{render:function(){return Object(m.jsx)(o.a,{to:"/login"})}})]})]})};var ne=function(){return Object(m.jsx)("div",{className:"App",children:Object(m.jsxs)(o.d,{children:[Object(m.jsx)(Q,Object(r.a)({component:G,exact:!0,path:["/","/:type/:id","/new-message"]},"exact",!0)),Object(m.jsx)(o.b,{component:se})]})})},ae=function(e){e&&e instanceof Function&&s.e(3).then(s.bind(null,83)).then((function(t){var s=t.getCLS,n=t.getFID,a=t.getFCP,c=t.getLCP,i=t.getTTFB;s(e),n(e),a(e),c(e),i(e)}))};i.a.render(Object(m.jsx)(a.a.StrictMode,{children:Object(m.jsx)(C.a,{basename:"/slack-app",children:Object(m.jsx)(x,{children:Object(m.jsx)(ne,{})})})}),document.getElementById("root")),ae()}},[[82,1,2]]]);
//# sourceMappingURL=main.ce98480b.chunk.js.map